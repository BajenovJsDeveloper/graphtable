(this.webpackJsonpgraphtable=this.webpackJsonpgraphtable||[]).push([[0],{121:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a(0),c=a.n(r),i=a(11),s=a.n(i),o=a(21),l=a(19),d=a(66),u=a(91),b=a(92),g=a.n(b),j=a(93),h=a(94),f=100,O=1;function m(){var e=Math.round(1*Math.random()),t=Math.ceil(24*Math.random());return new Date(2020,8,O+=e,t,0).valueOf()}var v=new(function(){function e(t){Object(j.a)(this,e),this.data=[],this.senders=t,this.message=""}return Object(h.a)(e,[{key:"create",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=this.senders.length,a=1;a<=e;a++){var n=Math.random()*f,r=Math.random()*f,c=Math.round(1*Math.random());this.data.push({transactionID:a,date:m(),debitAmount:0===c?n:0,creditAmount:1===c?r:0,sender:this.senders[Math.floor(Math.random()*t)]})}}},{key:"getMockData",value:function(){return this.data}},{key:"setMessage",value:function(e){this.message=e}},{key:"resetMessage",value:function(){this.message=""}},{key:"getMessage",value:function(){return this.message}},{key:"filterByDate",value:function(e){this.resetMessage();var t=e.start,a=e.end;return this.data.filter((function(e){if(e.date>=t&&e.date<=a)return!0;var n=new Date(e.date),r=new Date(t),c=new Date(a);return n.getDate()===r.getDate()&&n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()||c.getDate()===n.getDate()&&c.getMonth()===n.getMonth()&&c.getFullYear()===n.getFullYear()})).reverse()}},{key:"filterByDefault",value:function(){this.resetMessage();var e=new Date,t=new Date;t.setMonth(e.getMonth()-1),t.setDate(e.getDate()-1);var a=t.valueOf(),n=e.valueOf();return this.data.filter((function(e){return e.date>=a&&e.date<=n})).reverse()}},{key:"determinateSize",value:function(e){var t=Object(d.a)(e);return console.log("Length ",t.length),e.length>200&&(t.splice(200),this.setMessage("Too more data.")),t}},{key:"checkValid",value:function(e){return!(Math.abs(e.start-e.end)>15984e6)}}]),e}())(["MICB","MAIB","EXB","ECB","VICB","IMPORT-SRL","FORDEXPRESS"]);v.create(1e3);var p={get:function(e,t){if("Vladimir"===t.userName&&"admin"===t.userPassword){var a,n,r=[];return t.dateRange&&v.checkValid(t.dateRange)?r=v.determinateSize(v.filterByDate(t.dateRange)):(n=(r=v.determinateSize(v.filterByDefault()))[0].date,a=r[r.length-1].date),Promise.resolve({data:r,message:"auth is ok",status:"ok",range:{start:a,end:n},dataMsg:v.getMessage()})}return Promise.resolve({data:[],message:"User Auth EROR!!",status:"error",dataMsg:v.getMessage()})}},x=a(48),S=a(226),D=a(232),k=a(236),w=a(235),y=a(230),M=a(233),N=a(234),P=a(237),C=a(238),A=a(231),T=a(99),F=a.n(T),R=a(95),I=a.n(R),E=(a(120),a(121),function(e){var t=e.onSelect,a=e.onCancel,c=Object(r.useState)(new Date),i=Object(l.a)(c,2),s=i[0],o=i[1];Object(r.useEffect)((function(){function e(e){27===e.keyCode&&a()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[a]);return Object(n.jsx)(I.a,{selected:s,onChange:function(e){var a=Object(l.a)(e,2),n=a[0],r=a[1];o(n),n&&r&&t({start:n.valueOf(),end:r.valueOf()})},startDate:s,selectsRange:!0,inline:!0})}),_=a(228),B=Object(S.a)({filterIcon:{marginLeft:30,position:"relative"}});var L=function(e){var t=e.onFilterSort,a=B(),i=Object(r.useState)(!1),s=Object(l.a)(i,2),o=s[0],d=s[1],u=new Date;return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(_.a,{onClick:function(){d(!0)},disabled:!1,"aria-label":"Filter",className:a.filterIcon,title:"Filter by date",children:Object(n.jsx)(F.a,{color:"primary"})}),o&&Object(n.jsx)("div",{className:"date-picker",children:Object(n.jsx)(E,{date:u,onSelect:function(e){d(!1),t(e)},onCancel:function(){d(!1)}})})]})},z=a(100),H=a.n(z),V=a(101),Y=a.n(V);var U=function(e){var t=e.direction,a=e.clickSort,r=e.name,c=e.active===r?"secondary":"disabled";return Object(n.jsx)(_.a,{onClick:function(){return a(r)},disabled:!1,"aria-label":"Sorting",size:"small",children:"asc"===t?Object(n.jsx)(H.a,{color:c}):Object(n.jsx)(Y.a,{color:c})})},G=a(239),J=(a(186),{left:"",right:"mdl"}),W=Object(S.a)({table:{minWidth:"300px",width:"100%"},tableTH:{color:"#0d218c",whiteSpace:"nowrap",fontSize:"0.8rem",padding:"8px 0"},tableTD:{color:"gray",padding:"3px","&>p":{padding:0,margin:0},"&:first-child":{paddingRight:30},"&:nth-child(2)":{width:100},"&>p:last-child":{color:"#c1c1c1",fontSize:"0.8em"}},tableBG:{backgroundColor:"#e0e0e0"}});function X(e){return new Date(e).toLocaleTimeString()}function q(e){var t=e.rowsPageData,a=e.handleSorting,c=e.onChangePage,i=e.onChangePerPage,s=e.onFilterSort,d=e.paginator,u=e.dateRange,b=Object(r.useState)({sender:"desc",id:"asc",date:"desc",debit:"desc",credit:"desc",active:"id"}),g=Object(l.a)(b,2),j=g[0],h=g[1],f=W(),O=function(e,t){return Number(e)>0?"".concat(t.left.toUpperCase()," ").concat(e," ").concat(t.right.toUpperCase()):"-"},m=function(e){return new Date(e).toLocaleDateString()},v=function(e){var t=e.toFixed(2).split("."),a=t[0].split("").reverse(),n=t[1];return a=(a=a.map((function(e,t){return t%3===0&&t>0?"".concat(e," "):e}))).reverse().join(""),t[0]=a,t[1]=n,t.join(".")},p=function(e){var n=function(e){return"asc"===e?"desc":"asc"}(j[e]);h((function(t){var a;return Object(o.a)(Object(o.a)({},t),{},(a={},Object(x.a)(a,e,n),Object(x.a)(a,"active",e),a))})),a(n,e,t)};return Object(n.jsx)(y.a,{component:A.a,children:Object(n.jsxs)(D.a,{className:f.table,"aria-label":"simple table",children:[Object(n.jsxs)(M.a,{className:f.tableBG,children:[Object(n.jsxs)(N.a,{children:[Object(n.jsx)(w.a,{colSpan:2,className:f.tableTH,align:"right",title:"Filter",children:Object(n.jsxs)(G.a,{className:"filter",children:[Object(n.jsx)(L,{onFilterSort:s}),Object(n.jsxs)(G.a,{className:"date__container",children:[Object(n.jsx)("div",{className:"date__label",children:"Date range:"}),Object(n.jsx)("div",{className:"date__range",children:"".concat(m(u.start)," - ").concat(m(u.end))})]})]})}),Object(n.jsx)(w.a,{p:2,colSpan:3,className:f.tableTH,align:"left"})]}),Object(n.jsxs)(N.a,{children:[Object(n.jsxs)(w.a,{className:f.tableTH,align:"center",title:"Sorting by id number",children:[Object(n.jsx)(U,{active:j.active,name:"id",direction:j.id,clickSort:p,title:"Sorting by id number"}),"Transaction ID"]}),Object(n.jsxs)(w.a,{className:f.tableTH,align:"center",title:"Sorting by date",children:[Object(n.jsx)(U,{active:j.active,name:"date",direction:j.date,clickSort:p}),"Date"]}),Object(n.jsxs)(w.a,{className:f.tableTH,align:"right",title:"Sorting debit",children:[Object(n.jsx)(U,{active:j.active,name:"debit",direction:j.debit,clickSort:p}),"Debet Amount"]}),Object(n.jsxs)(w.a,{className:f.tableTH,align:"right",title:"Sorting by credit",children:[Object(n.jsx)(U,{active:j.active,name:"credit",direction:j.credit,clickSort:p}),"Credit Amount"]}),Object(n.jsxs)(w.a,{className:f.tableTH,align:"center",title:"Sorting by sender",children:[Object(n.jsx)(U,{active:j.active,name:"sender",direction:j.sender,clickSort:p}),"Sender"]})]})]}),Object(n.jsx)(k.a,{children:t.map((function(e){return Object(n.jsxs)(N.a,{children:[Object(n.jsx)(w.a,{className:f.tableTD,align:"right",children:e.transactionID}),Object(n.jsxs)(w.a,{className:f.tableTD,align:"right",children:[Object(n.jsx)("p",{children:(t=e.date,new Date(t).toLocaleDateString())}),Object(n.jsx)("p",{children:X(e.date)})]}),Object(n.jsx)(w.a,{className:f.tableTD,align:"right",children:O(v(e.debitAmount),J)}),Object(n.jsx)(w.a,{className:f.tableTD,align:"right",children:O(v(e.creditAmount),J)}),Object(n.jsx)(w.a,{className:f.tableTD,align:"center",children:e.sender})]},e.transactionID);var t}))}),Object(n.jsx)(P.a,{children:Object(n.jsx)(N.a,{children:Object(n.jsx)(C.a,{rowsPerPageOptions:[10,25,50,100,{label:"All",value:-1}],colSpan:5,count:d.count,rowsPerPage:d.perPage,page:d.page,SelectProps:{inputProps:{"aria-label":"Records per page"},native:!0},onChangePage:c,onChangeRowsPerPage:i})})})]})})}var K=a(102),Q=a.n(K),Z=(a(187),Object(S.a)({loading:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.2)",zIndex:200},icon:{fontSize:"3rem"}}));function $(e){var t=e.isLoading,a=Z();return t?Object(n.jsx)(G.a,{className:a.loading,children:Object(n.jsx)(Q.a,{id:"load"})}):null}a(188);var ee="https://graphs.com";function te(e,t){var a=document.getElementById(e).getContext("2d"),n=t.map((function(e,t){return e[0]})),r=t.map((function(e,t){return e[1]})),c=new g.a(a,{type:"pie",data:{labels:n,datasets:[{data:r,backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)"],borderColor:"gray",borderWidth:1}]}});return c.destroy.bind(c)}function ae(e,t){var a=[],n=0===t?"debitAmount":"creditAmount",r=new Map;e.forEach((function(e){var t=0;r.has(e.sender)?(t=r.get(e.sender)+Number.parseFloat(e[n]),r.set(e.sender,t)):r.set(e.sender,e[n])}));var c,i=Object(u.a)(r);try{for(i.s();!(c=i.n()).done;){var s=c.value;s[1]=s[1].toFixed(2),a.push(s)}}catch(o){i.e(o)}finally{i.f()}return a.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})),console.log(a),a}function ne(e,t,a){var n="desc"===e?1:-1;return a.sort((function(e,a){return e[t]>a[t]?1*n:e[t]<a[t]?-1*n:0}))}function re(e,t){var a,n,r=[],c=e.length,i=t.perPage,s=t.page;0===i&&(i=10,s=0),i>=c&&(s=0),-1===i&&(i=c),n=c>=(a=s*i)+i?a+i:c;for(var o=a;o<n;o++)r.push(e[o]);return i=-1!==t.perPage?i:t.perPage,r}var ce=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(l.a)(i,2),u=s[0],b=s[1],g=Object(r.useState)((function(){return{page:0,perPage:10,count:0}})),j=Object(l.a)(g,2),h=j[0],f=j[1],O=Object(r.useState)(!1),m=Object(l.a)(O,2),v=m[0],x=m[1],S=Object(r.useState)({start:(new Date).toLocaleDateString(),end:(new Date).toLocaleDateString()}),D=Object(l.a)(S,2),k=D[0],w=D[1],y=a.length>0,M=function(e,t){var a={userName:"Vladimir",userPassword:"admin"};t&&(a.dateRange=t),x(!0),p.get(e,a).then((function(e){if("ok"!==e.status)throw new Error("Something is wrong!!! "+e.message);setTimeout((function(){c(e.data),f((function(t){return Object(o.a)(Object(o.a)({},t),{},{page:0,count:e.data.length,perPage:t.perPage})})),x(!1),console.log("from server: ",e,t),t?w(t):e.range&&w(e.range)}),1e3)}))};return Object(r.useEffect)((function(){a.length>0&&b(re(a,h))}),[a]),Object(r.useEffect)((function(){M(ee)}),[]),Object(r.useEffect)((function(){if(a.length>0){var e=ae(a,0),t=ae(a,1),n=te("chart-credit",e),r=te("chart-debit",t);return function(){r(),n()}}}),[k]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)($,{isLoading:v}),y&&Object(n.jsxs)(G.a,{className:"App__graph-container",fontFamily:"Roboto",fontSize:20,p:1,children:[Object(n.jsxs)(G.a,{className:"App__graphic",children:["Debit Amount",Object(n.jsx)("canvas",{id:"chart-credit"})]}),Object(n.jsxs)(G.a,{className:"App__graphic",children:["Credit Amount",Object(n.jsx)("canvas",{id:"chart-debit"})]})]}),Object(n.jsx)(G.a,{className:"App__table",children:Object(n.jsx)(q,{rowsPageData:u,onFilterSort:function(e){M(ee,e)},paginator:h,handleSorting:function(e,t,n){var r=function(e,t,a){var n=Object(d.a)(a);switch(t){case"id":ne(e,"transactionID",n);break;case"sender":ne(e,"sender",n);break;case"date":ne(e,"date",n);break;case"credit":ne(e,"creditAmount",n);break;case"debit":ne(e,"debitAmount",n);break;default:ne(e,"transactionID",n)}return n}(e,t,a);c(r);var i=Object(o.a)(Object(o.a)({},h),{},{page:0});b(re(r,i))},onChangePage:function(e,t){var n=Object(o.a)(Object(o.a)({},h),{},{page:t});b(re(a,n)),f(n)},onChangePerPage:function(e){var t=Number(e.target.value),n=Object(o.a)(Object(o.a)({},h),{},{page:0,perPage:t});b(re(a,n)),f(n)},dateRange:k})})]})};s.a.render(Object(n.jsx)(ce,{}),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.a2c8dd3d.chunk.js.map