(this.webpackJsonpgraphtable=this.webpackJsonpgraphtable||[]).push([[0],{121:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a(0),c=a.n(r),i=a(11),o=a.n(i),s=a(21),l=a(20),d=a(101),u=a(89),b=a(90),j=a.n(b),g=a(91),h=a(92),f=3e3,O=1;function m(){var e=Math.round(1*Math.random()),t=Math.ceil(24*Math.random());return new Date(2020,8,O+=e,t,0).valueOf()}var v=new(function(){function e(t){Object(g.a)(this,e),this.data=[],this.senders=t}return Object(h.a)(e,[{key:"create",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=this.senders.length,a=1;a<=e;a++)this.data.push({transactionID:a,date:m(),debitAmount:Math.round(Math.random()*f),creditAmount:Math.round(Math.random()*f),sender:this.senders[Math.floor(Math.random()*t)]})}},{key:"getMockData",value:function(){return this.data}},{key:"filterByDate",value:function(e){var t=e.start,a=e.end;return this.data.filter((function(e){if(e.date>=t&&e.date<=a)return!0;var n=new Date(e.date),r=new Date(t),c=new Date(a);return n.getDate()===r.getDate()&&n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()||c.getDate()===n.getDate()&&c.getMonth()===n.getMonth()&&c.getFullYear()===n.getFullYear()})).reverse()}},{key:"filterByDefault",value:function(){var e=new Date,t=new Date;t.setMonth(e.getMonth()-1),t.setDate(e.getDate()-1);var a=t.valueOf(),n=e.valueOf();return this.data.filter((function(e){return e.date>=a&&e.date<=n})).reverse()}}]),e}())(["MICB","MAIB","EXB","ECB","VICB","IMPORT-SRL","FORDEXPRESS"]);v.create(500);var p={get:function(e,t){if("Vladimir"===t.userName&&"admin"===t.userPassword){var a=[];return a=!t.dateRange||(n=t.dateRange,Math.abs(n.start-n.end)>15984e6)?v.filterByDefault():v.filterByDate(t.dateRange),Promise.resolve({data:a,message:"auth is ok",status:"ok"})}return Promise.resolve({data:[],message:"User Auth EROR!!",status:"error"});var n}},x=a(48),S=a(226),D=a(232),w=a(236),P=a(235),k=a(230),y=a(233),C=a(234),N=a(237),M=a(238),A=a(231),R=a(97),F=a.n(R),I=a(93),T=a.n(I),E=(a(120),a(121),function(e){var t=e.onSelect,a=e.onCancel,c=Object(r.useState)(new Date),i=Object(l.a)(c,2),o=i[0],s=i[1];Object(r.useEffect)((function(){function e(e){27===e.keyCode&&a()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[a]);return Object(n.jsx)(T.a,{selected:o,onChange:function(e){var a=Object(l.a)(e,2),n=a[0],r=a[1];s(n),n&&r&&t({start:n.valueOf(),end:r.valueOf()})},startDate:o,selectsRange:!0,inline:!0})}),B=a(228),L=Object(S.a)({filterIcon:{marginLeft:30,position:"relative"}});var _=function(e){var t=e.onFilterSort,a=(e.onFilterReset,L()),i=Object(r.useState)(!1),o=Object(l.a)(i,2),s=o[0],d=o[1],u=new Date;return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(B.a,{onClick:function(){d(!0)},disabled:!1,"aria-label":"Filter",className:a.filterIcon,title:"Filter by date",children:Object(n.jsx)(F.a,{color:"primary"})}),s&&Object(n.jsx)("div",{className:"date-picker",children:Object(n.jsx)(E,{date:u,onSelect:function(e){d(!1),t(e)},onCancel:function(){d(!1)}})})]})},z=a(98),H=a.n(z),Y=a(99),V=a.n(Y);var G=function(e){var t=e.direction,a=e.clickSort,r=e.name,c=e.active===r?"secondary":"disabled";return Object(n.jsx)(B.a,{onClick:function(){return a(r)},disabled:!1,"aria-label":"Sorting",size:"small",children:"asc"===t?Object(n.jsx)(H.a,{color:c}):Object(n.jsx)(V.a,{color:c})})},J=(a(186),""),W="mdl",X=Object(S.a)({table:{minWidth:"300px",width:"100%"},tableTH:{color:"#0d218c",whiteSpace:"nowrap",fontSize:"0.8rem",padding:"8px 0"},tableTD:{color:"gray",padding:"3px","&>p":{padding:0,margin:0},"&>p:last-child":{color:"#c1c1c1",fontSize:"0.8em"}},tableBG:{backgroundColor:"#e0e0e0"}});function U(e){return new Date(e).toLocaleTimeString()}function q(e){var t=e.rowsPageData,a=e.handleSorting,c=e.onChangePage,i=e.onChangePerPage,o=e.onFilterSort,d=e.paginator,u=e.onFilterReset,b=Object(r.useState)({sender:"desc",id:"asc",date:"desc",debit:"desc",credit:"desc",active:"id"}),j=Object(l.a)(b,2),g=j[0],h=j[1],f=X(),O=function(e){var n=function(e){return"asc"===e?"desc":"asc"}(g[e]);h((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},(a={},Object(x.a)(a,e,n),Object(x.a)(a,"active",e),a))})),a(n,e,t)};return Object(n.jsx)(k.a,{component:A.a,children:Object(n.jsxs)(D.a,{className:f.table,"aria-label":"simple table",children:[Object(n.jsx)(y.a,{className:f.tableBG,children:Object(n.jsxs)(C.a,{children:[Object(n.jsxs)(P.a,{className:f.tableTH,align:"center",title:"Sorting by id number",children:[Object(n.jsx)(G,{active:g.active,name:"id",direction:g.id,clickSort:O,title:"Sorting by id number"}),"Transaction ID"]}),Object(n.jsxs)(P.a,{className:f.tableTH,align:"left",title:"Sorting by date",children:[Object(n.jsx)(G,{active:g.active,name:"date",direction:g.date,clickSort:O}),"Date"]}),Object(n.jsxs)(P.a,{className:f.tableTH,align:"right",title:"Sorting debit",children:[Object(n.jsx)(G,{active:g.active,name:"debit",direction:g.debit,clickSort:O}),"Debet Amount"]}),Object(n.jsxs)(P.a,{className:f.tableTH,align:"right",title:"Sorting by credit",children:[Object(n.jsx)(G,{active:g.active,name:"credit",direction:g.credit,clickSort:O}),"Credit Amount"]}),Object(n.jsxs)(P.a,{className:f.tableTH,align:"center",title:"Sorting by sender",children:[Object(n.jsx)(G,{active:g.active,name:"sender",direction:g.sender,clickSort:O}),"Sender",Object(n.jsx)(_,{onFilterSort:o,onFilterReset:u})]})]})}),Object(n.jsx)(w.a,{children:t.map((function(e){return Object(n.jsxs)(C.a,{children:[Object(n.jsx)(P.a,{className:f.tableTD,align:"center",children:e.transactionID}),Object(n.jsxs)(P.a,{className:f.tableTD,align:"left",children:[Object(n.jsx)("p",{children:(t=e.date,new Date(t).toLocaleDateString())}),Object(n.jsx)("p",{children:U(e.date)})]}),Object(n.jsx)(P.a,{className:f.tableTD,align:"right",children:"".concat(J," ").concat(e.debitAmount," ").concat(W)}),Object(n.jsx)(P.a,{className:f.tableTD,align:"right",children:"".concat(J," ").concat(e.creditAmount," ").concat(W)}),Object(n.jsx)(P.a,{className:f.tableTD,align:"center",children:e.sender})]},e.transactionID);var t}))}),Object(n.jsx)(N.a,{children:Object(n.jsx)(C.a,{children:Object(n.jsx)(M.a,{rowsPerPageOptions:[10,25,50,100,{label:"All",value:-1}],colSpan:5,count:d.count,rowsPerPage:d.perPage,page:d.page,SelectProps:{inputProps:{"aria-label":"Records per page"},native:!0},onChangePage:c,onChangeRowsPerPage:i})})})]})})}var K=a(239),Q=a(100),Z=a.n(Q),$=(a(187),Object(S.a)({loading:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.2)",zIndex:200},icon:{fontSize:"3rem"}}));function ee(e){var t=e.isLoading,a=$();return t?Object(n.jsx)(K.a,{className:a.loading,children:Object(n.jsx)(Z.a,{id:"load"})}):null}a(188);var te="https://graphs.com";function ae(e,t){var a=document.getElementById(e).getContext("2d"),n=t.map((function(e,t){return e[0]})),r=t.map((function(e,t){return e[1]})),c=new j.a(a,{type:"pie",data:{labels:n,datasets:[{data:r,backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)"],borderColor:"gray",borderWidth:1}]}});return c.destroy.bind(c)}function ne(e,t){var a=[],n=0===t?"debitAmount":"creditAmount",r=new Map;e.forEach((function(e){var t=0;r.has(e.sender)?(t=r.get(e.sender)+e[n],r.set(e.sender,t)):r.set(e.sender,e[n])}));var c,i=Object(u.a)(r);try{for(i.s();!(c=i.n()).done;){var o=c.value;a.push(o)}}catch(s){i.e(s)}finally{i.f()}return a.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})),a}function re(e,t,a){var n="desc"===e?1:-1;return a.sort((function(e,a){return e[t]>a[t]?1*n:e[t]<a[t]?-1*n:0}))}function ce(e,t){var a,n,r=[],c=e.length,i=t.perPage,o=t.page;0===i&&(i=10,o=0),i>=c&&(o=0),-1===i&&(i=c),n=c>=(a=o*i)+i?a+i:c;for(var s=a;s<n;s++)r.push(e[s]);return i=-1!==t.perPage?i:t.perPage,r}var ie=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),o=Object(l.a)(i,2),u=o[0],b=o[1],j=Object(r.useState)((function(){return{page:0,perPage:10,count:0}})),g=Object(l.a)(j,2),h=g[0],f=g[1],O=Object(r.useState)(!1),m=Object(l.a)(O,2),v=m[0],x=m[1],S=a.length>0,D=function(e,t,a){var n={userName:"Vladimir",userPassword:"admin"};t&&(n.dateRange=t),x(!0),p.get(e,n).then((function(e){if("ok"!==e.status)throw new Error("Something is wrong!!! "+e.message);setTimeout((function(){c(e.data),f((function(t){return Object(s.a)(Object(s.a)({},t),{},{page:0,count:e.data.length,perPage:t.perPage})})),x(!1),console.log("from server: ",e)}),1e3)}))};return Object(r.useEffect)((function(){a.length>0&&b(ce(a,h))}),[a]),Object(r.useEffect)((function(){D(te)}),[]),Object(r.useEffect)((function(){if(a.length>0){var e=ne(a,0),t=ne(a,1),n=ae("chart-credit",e),r=ae("chart-debit",t);return function(){r(),n()}}}),[a]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(ee,{isLoading:v}),S&&Object(n.jsxs)(K.a,{className:"App__graph-container",fontFamily:"Roboto",fontSize:20,p:1,children:[Object(n.jsxs)(K.a,{className:"App__graphic",children:["Debit Amount",Object(n.jsx)("canvas",{id:"chart-credit"})]}),Object(n.jsxs)(K.a,{className:"App__graphic",children:["Credit Amount",Object(n.jsx)("canvas",{id:"chart-debit"})]})]}),Object(n.jsx)(K.a,{className:"App__table",children:Object(n.jsx)(q,{rowsPageData:u,onFilterSort:function(e){D(te,e,h.perPage)},paginator:h,handleSorting:function(e,t,n){var r=function(e,t,a){var n=Object(d.a)(a);switch(t){case"id":re(e,"transactionID",n);break;case"sender":re(e,"sender",n);break;case"date":re(e,"date",n);break;case"credit":re(e,"creditAmount",n);break;case"debit":re(e,"debitAmount",n);break;default:re(e,"transactionID",n)}return n}(e,t,a);c(r);var i=Object(s.a)(Object(s.a)({},h),{},{page:0});b(ce(r,i))},onChangePage:function(e,t){var n=Object(s.a)(Object(s.a)({},h),{},{page:t});b(ce(a,n)),f(n)},onChangePerPage:function(e){var t=Number(e.target.value),n=Object(s.a)(Object(s.a)({},h),{},{page:0,perPage:t});b(ce(a,n)),f(n)},onFilterReset:function(){}})})]})};o.a.render(Object(n.jsx)(ie,{}),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.24bb34e0.chunk.js.map